(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Menu",{attrs:{mode:"horizontal",theme:"primary"}},[r("Menu-item",{attrs:{name:"title"}},[r("h3",[e._v("TASKCTL 业界领先ETL批量调度专家（7.0 rest-api demo）")])])],1),r("Collapse",{model:{value:e.activeKeys,callback:function(t){e.activeKeys=t},expression:"activeKeys"}},[r("Panel",{attrs:{name:"config"}},[r("span",[e._v("Cors Request baseURL")]),r("i-form",{attrs:{slot:"content","label-width":80,inline:""},slot:"content"},[r("Form-item",{attrs:{label:"baseURL"}},[r("i-input",{staticStyle:{width:"200px"},attrs:{placeholder:"http://xxxx:8099"},model:{value:e.baseURL,callback:function(t){e.baseURL=t},expression:"baseURL"}})],1)],1)],1),r("Panel",{attrs:{name:"login"}},[r("span",[e._v("1.用户登录 | POST /user/login")]),r("Login",{attrs:{slot:"content"},slot:"content",model:{value:e.headers,callback:function(t){e.headers=t},expression:"headers"}})],1),r("Panel",{key:"ctlstart"},[r("span",[e._v("2.启动容器 | POST /tcc/start")]),r("TccStart",{attrs:{slot:"content",headers:e.headers},slot:"content"})],1),r("Panel",{key:"ctljobstart"},[r("span",[e._v("3.运行作业 | POST /job/doit")]),r("TccJobStart",{attrs:{slot:"content",headers:e.headers},slot:"content"})],1)],1)],1)},s=[],i=r("d4ec"),o=r("bee2"),c=r("262e"),l=r("2caf"),u=r("9ab4"),p=r("60a3"),d=r("7f37"),h=r.n(d),m=r("bc3a"),f=r.n(m),b=r("e069"),g=r.n(b),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{attrs:{model:e.form,rules:e.rules,inline:""}},[r("Form-item",{attrs:{prop:"user"}},[r("i-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("Form-item",{attrs:{prop:"password"}},[r("i-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.login(e.form.username,e.form.password)}}},[e._v("登录")])],1)],1),r("pre",{key:e.headersJsonStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n    // headers 头部认证信息\n    "+e._s(e.headersJsonStr)+" \n  ")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n  import axios from "axios";\n  import qs from "qs";\n  \n  /**\n  * 登录\n  * @param username 用户名\n  * @param password 密码\n  * @return 授权头部信息 { Authorization: `Bearer${token}` }\n  */\n  async login(username: string, password: string) {\n    // application/x-www-form-urlencoded \n    const params = qs.stringify({ username, password });\n    this.loading = true;\n    const rsp: any = await axios.post("/user/login", params, this.headers);\n    this.loading = false;\n    if (!rsp.success) return;\n    this.$Message.success("登录成功");\n\n    const token = rsp.data;\n    const headers = { Authorization: `Bearer${token}` };\n    // 获取登录令牌，其他登录请携带令牌\n    // axios.post(\'/xxx\', params, { headers });\n    this.$emit("input", headers);\n    return headers;\n  }\n  ')])])}],O=(r("96cf"),r("1da1")),j=r("4328"),w=r.n(j),x=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={username:"",password:""},e.rules={},e.loading=!1,e}return Object(o["a"])(r,[{key:"login",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=w.a.stringify({username:t,password:r}),this.loading=!0,e.next=4,f.a.post("/user/login",n);case 4:if(a=e.sent,this.loading=!1,a.success){e.next=8;break}return e.abrupt("return");case 8:return this.$Message.success("登录成功"),s=a.data,i={Authorization:"Bearer ".concat(s)},this.$emit("input",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])()],x.prototype,"headers",void 0),x=Object(u["a"])([Object(p["a"])({model:{prop:"headers"},storage:{keys:["form"],namespace:"login"}})],x);var S=x,_=S,k=r("2877"),$=Object(k["a"])(_,v,y,!1,null,null,null),J=$.exports,R=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{attrs:{model:e.form,"label-width":80,inline:""}},[r("Form-item",{attrs:{label:"appid"}},[r("i-input",{attrs:{placeholder:"工程编号"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),r("Form-item",{attrs:{label:"tccid"}},[r("i-input",{attrs:{placeholder:"容器编号"},model:{value:e.form.tccid,callback:function(t){e.$set(e.form,"tccid",t)},expression:"form.tccid"}})],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.tccStart(e.form.appid,e.form.tccid)}}},[e._v("正常模式启动")])],1)],1),r("Divider",[e._v("request/response")]),r("pre",{key:e.headersJsonStr+e.rspStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n    // headers 头部认证信息\n    "+e._s(e.headersJsonStr)+" \n\n    // response 请求返回值\n    "+e._s(e.rspStr)+" \n  ")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},L=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n  import axios from "axios";\n  import qs from "qs";\n\n  /**\n  * 正常模式启动单个容器\n  * @param appid 工程编号\n  * @param tccid 容器编号\n  */\n  async tccStart(appid: string, tccid: string) {\n    // 运行模式: 0-正常模式, 1-自由模式, 2-虚拟模式\n    const runMode = "0";\n    // 虚拟运行倍率\n    const virrate = 1;\n    // application/json - 请求\n    const data = { tccidOrName: tccid, runMode, virrate };\n    console.log(data);\n    this.loading = true;\n    const rsp: any = await axios.post(`/tcc/start?appid=${appid}`, data, {\n      headers: this.headers\n    });\n    this.rspStr = JSON.stringify({...rsp, success: undefined}, null, 2);\n    this.loading = false;\n    if (!rsp.success) return;\n    this.$Message.success("启动成功");\n  }\n  ')])])}],M=r("5530"),P=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={appid:"",tccid:""},e.rules={},e.loading=!1,e.rspStr="",e}return Object(o["a"])(r,[{key:"tccStart",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="0",a=1,s={tccidOrName:r,runMode:n,virrate:a},this.loading=!0,e.next=6,f.a.post("/tcc/start?appid=".concat(t),s,{headers:this.headers});case 6:if(i=e.sent,this.rspStr=JSON.stringify(Object(M["a"])(Object(M["a"])({},i),{},{success:void 0}),null,2),this.loading=!1,i.success){e.next=11;break}return e.abrupt("return");case 11:this.$Message.success("启动成功");case 12:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])()],P.prototype,"headers",void 0),P=Object(u["a"])([Object(p["a"])({storage:{keys:["form"],namespace:"login"}})],P);var U=P,N=U,T=Object(k["a"])(N,R,L,!1,null,null,null),q=T.exports,C=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{attrs:{model:e.form,"label-width":80,inline:""}},[r("Form-item",{attrs:{label:"appid"}},[r("i-input",{attrs:{placeholder:"工程编号"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),r("Form-item",{attrs:{label:"tccid"}},[r("i-input",{attrs:{placeholder:"容器编号"},model:{value:e.form.tccid,callback:function(t){e.$set(e.form,"tccid",t)},expression:"form.tccid"}})],1),r("Form-item",{attrs:{label:"jobname"}},[r("i-input",{attrs:{placeholder:"作业名称"},model:{value:e.form.jobname,callback:function(t){e.$set(e.form,"jobname",t)},expression:"form.jobname"}})],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.tccJobStart(e.form.appid,e.form.tccid,e.form.jobname)}}},[e._v("运行作业")])],1)],1),r("Divider",[e._v("request/response")]),r("pre",{key:e.headersJsonStr+e.rspStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n    // headers 头部认证信息\n    "+e._s(e.headersJsonStr)+" \n\n    // response 请求返回值\n    "+e._s(e.rspStr)+" \n  ")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},F=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n  import axios from "axios";\n  import qs from "qs";\n\n  /**\n  * 运行作业(容器必须已启动)\n  * @param appid 工程编号\n  * @param tccid 容器编号\n  * @param jobname 作业名称\n  */\n  async tccJobStart(appid: string, tccid: string, jobname: string) {\n    // application/x-www-form-urlencoded \n    const params = qs.stringify({ appid, tccid, jobname });\n    this.loading = true;\n    const rsp: any = await axios.post(`/job/doit`, params, {\n      headers: this.headers\n    });\n    this.rspStr = JSON.stringify({...rsp, success: undefined}, null, 2);\n    this.loading = false;\n    if (!rsp.success) return;\n    this.$Message.success("运行成功");\n  }\n  ')])])}],E=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={appid:"",tccid:""},e.rules={},e.loading=!1,e.rspStr="",e}return Object(o["a"])(r,[{key:"tccJobStart",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=w.a.stringify({appid:t,tccid:r,jobname:n}),this.loading=!0,e.next=4,f.a.post("/job/doit",a,{headers:this.headers});case 4:if(s=e.sent,this.rspStr=JSON.stringify(Object(M["a"])(Object(M["a"])({},s),{},{success:void 0}),null,2),this.loading=!1,s.success){e.next=9;break}return e.abrupt("return");case 9:this.$Message.success("运行成功");case 10:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])()],E.prototype,"headers",void 0),E=Object(u["a"])([Object(p["a"])({storage:{keys:["form"],namespace:"login"}})],E);var B=E,D=B,K=Object(k["a"])(D,C,F,!1,null,null,null),z=K.exports;f.a.interceptors.response.use((function(e){var t=e.data;if(t.success=0===t.code,!t.success){var r="string"==typeof t.data?t.data:t.message;b["Message"].error(r||t.message||"操作失败")}return t}),(function(e){return b["Message"].error(e.message||e||"操作失误"),{success:!1,message:e.message,error:e}})),f.a.defaults.baseURL="http://127.0.0.1:8099";var A=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.activeKeys=["login","ctlstart"],e.headers={},e.baseURL="",e}return Object(o["a"])(r,[{key:"onWatchBaseURL",value:function(){f.a.defaults.withCredentials=0==this.baseURL.length,f.a.defaults.baseURL=this.baseURL}},{key:"created",value:function(){return f.a.defaults.withCredentials=!1,void(this.baseURL||(this.baseURL="http://192.168.0.199:8099"))}}]),r}(p["c"]);Object(u["a"])([Object(p["d"])("baseURL",{immediate:!0})],A.prototype,"onWatchBaseURL",null),A=Object(u["a"])([Object(p["a"])({components:{Login:J,TccStart:q,TccJobStart:z},storage:{keys:["headers","baseURL"],namespace:"app",driver:h.a.drivers.sessionStorage}})],A);var I=A,W=I,G=Object(k["a"])(W,a,s,!1,null,null,null),H=G.exports,Q=(r("dcad"),r("1487")),V=r.n(Q),X=(r("2c43"),{install:function(e){e.directive("highlight",(function(e){V.a.highlightBlock(e)}))}});n["default"].use(X),n["default"].use(h.a),n["default"].use(g.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(H)}}).$mount("#app")}});
//# sourceMappingURL=app.5a43ede9.js.map