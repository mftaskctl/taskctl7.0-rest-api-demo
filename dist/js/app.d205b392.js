(function(e){function t(t){for(var n,i,o=t[0],c=t[1],l=t[2],p=0,d=[];p<o.length;p++)i=o[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);u&&u(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==a[c]&&(n=!1)}n&&(s.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},a={app:0},s=[];function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var u=c;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("cd49")},"034f":function(e,t,r){"use strict";var n=r("85ec"),a=r.n(n);a.a},"85ec":function(e,t,r){},cd49:function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app"},[e._m(0),r("Menu",{attrs:{mode:"horizontal",theme:"primary"}},[r("Menu-item",{attrs:{name:"title"}},[r("h3",[e._v("TASKCTL 业界领先ETL批量调度专家（7.0 rest-api demo）")])])],1),r("Collapse",{model:{value:e.activeKeys,callback:function(t){e.activeKeys=t},expression:"activeKeys"}},[r("Panel",{attrs:{name:"config"}},[r("span",[e._v("Cors Request baseURL")]),r("i-form",{attrs:{slot:"content","label-width":80,inline:""},slot:"content"},[r("Form-item",{attrs:{label:"baseURL"}},[r("i-input",{staticStyle:{width:"200px"},attrs:{placeholder:"http://xxxx:8099"},model:{value:e.baseURL,callback:function(t){e.baseURL=t},expression:"baseURL"}})],1)],1)],1),r("Panel",{attrs:{name:"login"}},[r("span",[e._v("1.用户登录 | POST /user/login")]),r("Login",{attrs:{slot:"content"},slot:"content",model:{value:e.headers,callback:function(t){e.headers=t},expression:"headers"}})],1),r("Panel",{key:"ctlstart"},[r("span",[e._v("2.启动容器 | POST /tcc/start")]),r("TccStart",{attrs:{slot:"content",headers:e.headers},slot:"content"})],1),r("Panel",{key:"restfulapi"},[r("span",[e._v("4.调用 Restful API | POST ")]),r("InvokeRestFulApi",{attrs:{slot:"content",headers:e.headers},slot:"content"})],1)],1)],1)},s=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"forkme"},[r("a",{attrs:{href:"https://gitee.com/mftaskctl/taskctl7.0-rest-api-demo"}},[e._v("Fork me on Gitee")])])}],i=r("d4ec"),o=r("bee2"),c=r("262e"),l=r("2caf"),u=r("9ab4"),p=r("60a3"),d=r("7f37"),m=r.n(d),f=r("bc3a"),h=r.n(f),v=r("e069"),g=r.n(v),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{attrs:{model:e.form,rules:e.rules,inline:""}},[r("Form-item",{attrs:{prop:"user"}},[r("i-input",{attrs:{type:"text",placeholder:"用户名"},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),r("Form-item",{attrs:{prop:"password"}},[r("i-input",{attrs:{type:"password",placeholder:"密码"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}},[r("Icon",{attrs:{slot:"prepend",type:"ios-locked-outline"},slot:"prepend"})],1)],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.login(e.form.username,e.form.password)}}},[e._v("登录")])],1)],1),r("pre",{key:e.headersJsonStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n    // headers 头部认证信息\n    "+e._s(e.headersJsonStr)+" \n  ")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},y=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n  import axios from "axios";\n  import qs from "qs";\n  \n  /**\n  * 登录\n  * @param username 用户名\n  * @param password 密码\n  * @return 授权头部信息 { Authorization: `Bearer${token}` }\n  */\n  async login(username: string, password: string) {\n    // application/x-www-form-urlencoded \n    const params = qs.stringify({ username, password });\n    this.loading = true;\n    const rsp: any = await axios.post("/user/login", params, this.headers);\n    this.loading = false;\n    if (!rsp.success) return;\n    this.$Message.success("登录成功");\n\n    const token = rsp.data;\n    const headers = { Authorization: `Bearer${token}` };\n    // 获取登录令牌，其他登录请携带令牌\n    // axios.post(\'/xxx\', params, { headers });\n    this.$emit("input", headers);\n    return headers;\n  }\n  ')])])}],O=(r("96cf"),r("1da1")),x=r("4328"),j=r.n(x),S=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={username:"",password:""},e.rules={},e.loading=!1,e}return Object(o["a"])(r,[{key:"login",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=j.a.stringify({username:t,password:r}),this.loading=!0,e.next=4,h.a.post("/user/login",n);case 4:if(a=e.sent,this.loading=!1,a.success){e.next=8;break}return e.abrupt("return");case 8:return this.$Message.success("登录成功"),s=a.data,i={Authorization:"Bearer ".concat(s)},this.$emit("input",i),e.abrupt("return",i);case 13:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])()],S.prototype,"headers",void 0),S=Object(u["a"])([Object(p["a"])({model:{prop:"headers"},storage:{keys:["form"],namespace:"login"}})],S);var k=S,_=k,w=r("2877"),P=Object(w["a"])(_,b,y,!1,null,null,null),q=P.exports,J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{attrs:{model:e.form,"label-width":80,inline:""}},[r("Form-item",{attrs:{label:"appid"}},[r("i-input",{attrs:{placeholder:"工程编号"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),r("Form-item",{attrs:{label:"tccid"}},[r("i-input",{attrs:{placeholder:"容器编号"},model:{value:e.form.tccid,callback:function(t){e.$set(e.form,"tccid",t)},expression:"form.tccid"}})],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.tccStart(e.form.appid,e.form.tccid)}}},[e._v("正常模式启动")])],1)],1),r("Divider",[e._v("request/response")]),r("pre",{key:e.headersJsonStr+e.rspStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n  // headers 头部认证信息\n  "+e._s(e.headersJsonStr)+" \n\n  // response 请求返回值\n  "+e._s(e.rspStr)+" \n")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},$=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n    import axios from "axios";\n    import qs from "qs";\n\n    /**\n    * 正常模式启动单个容器\n    * @param appid 工程编号\n    * @param tccid 容器编号\n    */\n    async tccStart(appid: string, tccid: string) {\n      // 运行模式: 0-正常模式, 1-自由模式, 2-虚拟模式\n      const runMode = "0";\n      // 虚拟运行倍率\n      const virrate = 1;\n      // application/json - 请求\n      const data = { tccidOrName: tccid, runMode, virrate };\n      console.log(data);\n      this.loading = true;\n      const rsp: any = await axios.post(`/tcc/start?appid=${appid}`, data, {\n        headers: this.headers\n      });\n      this.rspStr = JSON.stringify({...rsp, success: undefined}, null, 2);\n      this.loading = false;\n      if (!rsp.success) return;\n      this.$Message.success("启动成功");\n    }\n    ')])])}],R=r("5530"),N=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={appid:"",tccid:""},e.rules={},e.loading=!1,e.rspStr="",e}return Object(o["a"])(r,[{key:"tccStart",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r){var n,a,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n="0",a=1,s={tccidOrName:r,runMode:n,virrate:a},this.loading=!0,e.next=6,h.a.post("/tcc/start?appid=".concat(t),s,{headers:this.headers});case 6:if(i=e.sent,this.rspStr=JSON.stringify(Object(R["a"])(Object(R["a"])({},i),{},{success:void 0}),null,2),this.loading=!1,i.success){e.next=11;break}return e.abrupt("return");case 11:this.$Message.success("启动成功");case 12:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])()],N.prototype,"headers",void 0),N=Object(u["a"])([Object(p["a"])({storage:{keys:["form"],namespace:"login"}})],N);var L=N,F=L,M=Object(w["a"])(F,J,$,!1,null,null,null),A=M.exports,U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{attrs:{model:e.form,"label-width":80,inline:""}},[r("Form-item",{attrs:{label:"appid"}},[r("i-input",{attrs:{placeholder:"工程编号"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),r("Form-item",{attrs:{label:"tccid"}},[r("i-input",{attrs:{placeholder:"容器编号"},model:{value:e.form.tccid,callback:function(t){e.$set(e.form,"tccid",t)},expression:"form.tccid"}})],1),r("Form-item",{attrs:{label:"jobname"}},[r("i-input",{attrs:{placeholder:"作业名称"},model:{value:e.form.jobname,callback:function(t){e.$set(e.form,"jobname",t)},expression:"form.jobname"}})],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.tccJobStart(e.form.appid,e.form.tccid,e.form.jobname)}}},[e._v("运行作业")])],1)],1),r("Divider",[e._v("request/response")]),r("pre",{key:e.headersJsonStr+e.rspStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n  // headers 头部认证信息\n  "+e._s(e.headersJsonStr)+" \n\n  // response 请求返回值\n  "+e._s(e.rspStr)+" \n")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},C=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n    import axios from "axios";\n    import qs from "qs";\n\n    /**\n    * 运行作业(容器必须已启动)\n    * @param appid 工程编号\n    * @param tccid 容器编号\n    * @param jobname 作业名称\n    */\n    async tccJobStart(appid: string, tccid: string, jobname: string) {\n      // application/x-www-form-urlencoded \n      const params = qs.stringify({ appid, tccid, jobname });\n      this.loading = true;\n      const rsp: any = await axios.post(`/job/doit`, params, {\n        headers: this.headers\n      });\n      this.rspStr = JSON.stringify({...rsp, success: undefined}, null, 2);\n      this.loading = false;\n      if (!rsp.success) return;\n      this.$Message.success("运行成功");\n    }\n    ')])])}],T=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={appid:"",tccid:""},e.rules={},e.loading=!1,e.rspStr="",e}return Object(o["a"])(r,[{key:"tccJobStart",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=j.a.stringify({appid:t,tccid:r,jobname:n}),this.loading=!0,e.next=4,h.a.post("/job/doit",a,{headers:this.headers});case 4:if(s=e.sent,this.rspStr=JSON.stringify(Object(R["a"])(Object(R["a"])({},s),{},{success:void 0}),null,2),this.loading=!1,s.success){e.next=9;break}return e.abrupt("return");case 9:this.$Message.success("运行成功");case 10:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]);Object(u["a"])([Object(p["b"])()],T.prototype,"headers",void 0),T=Object(u["a"])([Object(p["a"])({storage:{keys:["form"],namespace:"login"}})],T);var E=T,D=E,I=Object(w["a"])(D,U,C,!1,null,null,null),z=I.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"login"},[r("i-form",{staticStyle:{"padding-right":"80px","max-width":"800px"},attrs:{model:e.form,"label-width":140}},[r("Form-item",{attrs:{label:"uri"}},[r("i-input",{attrs:{placeholder:"请求地址"},model:{value:e.form.uri,callback:function(t){e.$set(e.form,"uri",t)},expression:"form.uri"}})],1),r("Form-item",{attrs:{label:"method"}},[r("i-input",{attrs:{placeholder:"请求方法",readonly:""},model:{value:e.form.method,callback:function(t){e.$set(e.form,"method",t)},expression:"form.method"}})],1),r("Form-item",{attrs:{label:"queryStringParameters"}},[r("i-input",{attrs:{rows:4,placeholder:"请求参数(格式xx1=xx1&xx2=xx2,多个使用'&'连接)",type:"textarea"},model:{value:e.form.queryStringParameters,callback:function(t){e.$set(e.form,"queryStringParameters",t)},expression:"form.queryStringParameters"}})],1),r("Form-item",{attrs:{label:"reqestPayload"}},[r("i-input",{attrs:{rows:10,placeholder:"applicaiton/json",type:"textarea"},model:{value:e.form.requestPayload,callback:function(t){e.$set(e.form,"requestPayload",t)},expression:"form.requestPayload"}})],1),r("Form-item",[r("i-button",{attrs:{type:"primary",loading:e.loading},nativeOn:{click:function(t){return e.invokeRestfulApi2(e.form.uri,e.form.method,e.form.queryStringParameters,e.form.requestPayload)}}},[e._v("执行")]),e._v(" "),r("i-button",{attrs:{type:"info",loading:e.loading},nativeOn:{click:function(t){return e.invokeJobList(t)}}},[e._v("查询作业列表(状态：错误待执行)")]),e._v(" "),r("i-button",{attrs:{type:"info",loading:e.loading},nativeOn:{click:function(t){return e.invokeAllJobList(t)}}},[e._v("查询作业列表(所有作业)")])],1)],1),r("Divider",[e._v("request/response")]),r("pre",{key:e.headersJsonStr+e.rspStr},[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v("\n// headers 头部认证信息\n"+e._s(e.headersJsonStr)+" \n\n// request 请求信息\n"+e._s(e.reqStr)+" \n\n// response 请求返回值\n"+e._s(e.rspStr)+" \n")])]),r("Divider",[e._v("Code Preview")]),e._m(0)],1)},K=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("pre",[r("code",{directives:[{name:"highlight",rawName:"v-highlight"}]},[e._v('\n    import axios from "axios";\n\n    /**\n    * 调用 Restful 接口\n    * @param uri 请求相对路径(统一资源标识符)\n    * @param method 请求方法\n    * @param queryStringParameters 请求参数(查询字符串参数),如xx1=xx1&xx2=xx2,多个使用\'&\'连接\n    * @param requestPayload 请求体(application/json)\n    * @return void\n    */\n    async invokeRestfulApi(uri: string, method: uri, queryStringParameters: stirng, requestPayload: { [key: stirng]: any } = {}) {\n      this.loading = true;\n      const data = requestPayload;\n      const rsp: any = await axios.post(`${uri}?${queryStringParameters}`, data, {\n        headers: this.headers\n      });\n      this.reqStr = JSON.stringify({uri, method, queryStringParameters, requestPayload});\n      this.rspStr = JSON.stringify({...rsp, success: undefined});\n      this.loading = false;\n      if (!rsp.success) return;\n      this.$Message.success("调用成功");\n    }\n    ')])])}],W=(r("99af"),function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.form={uri:"",method:"post",queryStringParameters:"",requestPayload:""},e.rules={},e.loading=!1,e.reqStr="",e.rspStr="",e}return Object(o["a"])(r,[{key:"invokeRestfulApi2",value:function(e,t,r,n){var a=JSON.parse(n);return this.invokeRestfulApi(e,t,r,a)}},{key:"invokeJobList",value:function(){var e="/ana/jobtotal",t="post",r="appid=&tcctype=&tccid=&modulname=&runStates=20,25&jobTypes=&runAgent=&lock=&disable=&svrnodeName=svrnode",n=JSON.stringify({pageIndex:1,pageSize:20,sortField:"",asc:!0});this.invokeRestfulApi2(e,t,r,n)}},{key:"invokeAllJobList",value:function(){var e="/ana/jobtotal",t="post",r="appid=&tcctype=&tccid=&modulname=&runStates=&jobTypes=&runAgent=&lock=&disable=&svrnodeName=svrnode",n=JSON.stringify({pageIndex:1,pageSize:20,sortField:"",asc:!0});this.invokeRestfulApi2(e,t,r,n)}},{key:"invokeRestfulApi",value:function(){var e=Object(O["a"])(regeneratorRuntime.mark((function e(t,r,n){var a,s,i,o=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=o.length>3&&void 0!==o[3]?o[3]:{},this.loading=!0,s=a,e.next=5,h.a.post("".concat(t,"?").concat(n),s,{headers:this.headers});case 5:if(i=e.sent,this.reqStr=JSON.stringify({uri:t,method:r,queryStringParameters:n,requestPayload:a}),this.rspStr=JSON.stringify(Object(R["a"])(Object(R["a"])({},i),{},{success:void 0})),this.loading=!1,i.success){e.next=11;break}return e.abrupt("return");case 11:this.$Message.success("调用成功");case 12:case"end":return e.stop()}}),e,this)})));function t(t,r,n){return e.apply(this,arguments)}return t}()},{key:"headersJsonStr",get:function(){return JSON.stringify(this.headers)}}]),r}(p["c"]));Object(u["a"])([Object(p["b"])()],W.prototype,"headers",void 0),W=Object(u["a"])([Object(p["a"])({storage:{keys:["form"],namespace:"login"}})],W);var G=W,H=G,Q=(r("d217"),Object(w["a"])(H,B,K,!1,null,"57859016",null)),V=Q.exports;h.a.interceptors.response.use((function(e){var t=e.data;if(t.success=0===t.code,!t.success){var r="string"==typeof t.data?t.data:t.message;v["Message"].error(r||t.message||"操作失败")}return t}),(function(e){return v["Message"].error(e.message||e||"操作失误"),{success:!1,message:e.message,error:e}})),h.a.defaults.baseURL="http://127.0.0.1:8099";var X=function(e){Object(c["a"])(r,e);var t=Object(l["a"])(r);function r(){var e;return Object(i["a"])(this,r),e=t.apply(this,arguments),e.activeKeys=["login","ctlstart"],e.headers={},e.baseURL="",e}return Object(o["a"])(r,[{key:"onWatchBaseURL",value:function(){h.a.defaults.withCredentials=0==this.baseURL.length,h.a.defaults.baseURL=this.baseURL}},{key:"created",value:function(){return h.a.defaults.withCredentials=!1,void(this.baseURL||(this.baseURL="http://192.168.0.199:8099"))}}]),r}(p["c"]);Object(u["a"])([Object(p["d"])("baseURL",{immediate:!0})],X.prototype,"onWatchBaseURL",null),X=Object(u["a"])([Object(p["a"])({components:{Login:q,TccStart:A,TccJobStart:z,InvokeRestFulApi:V},storage:{keys:["headers","baseURL"],namespace:"app",driver:m.a.drivers.sessionStorage}})],X);var Y=X,Z=Y,ee=(r("034f"),Object(w["a"])(Z,a,s,!1,null,null,null)),te=ee.exports,re=(r("dcad"),r("1487")),ne=r.n(re),ae=(r("2c43"),{install:function(e){e.directive("highlight",(function(e){ne.a.highlightBlock(e)}))}});n["default"].use(ae),n["default"].use(m.a),n["default"].use(g.a),n["default"].config.productionTip=!1,new n["default"]({render:function(e){return e(te)}}).$mount("#app")},d217:function(e,t,r){"use strict";var n=r("dd9b"),a=r.n(n);a.a},dd9b:function(e,t,r){}});
//# sourceMappingURL=app.d205b392.js.map